PROC F_C_ANG_AT_CURNTZ_POS(REAL ZPOSITION,VAR REAL C_ANG) DISPLOF
;;**********程序功能**********
;;当前z位置下的C角度


;;***************************

DEF REAL DR1,DR2,DR3

DR1=ABS(ZPOSITION-INI[6])
DR2=DR1/INI[5]
DR3=(DR2-TRUNC(DR2))*360
IF GRIND[0]<>1
	C_ANG=TOOL_SET[4]+DR3
ELSE
	IF INI[0]==1
		C_ANG=TOOL_SET[4]-DR3
	ELSE
		C_ANG=TOOL_SET[4]+DR3
	ENDIF
ENDIF

F_ANG_WITHIN_360(C_ANG)

RET

