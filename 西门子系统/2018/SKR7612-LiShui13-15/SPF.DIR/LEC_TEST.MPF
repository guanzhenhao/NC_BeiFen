DEF AXIS AXIVAR
T0D0
DIAMOF
;DIAMOF
;M70
;G94G01 G90 W16 F1000
;M70
;M0
;R0=AXIS MAX
;R1=AXIS limit (被测轴+极限)
;R2=Step(测量步距)         ;INPUT 
;R3=Cycle times(循环次数)
;R4=Back distance(反向距离)
;R5=HOLD time(停留时间)    ;INPUT
;R6=Axis Speed
AXIVAR=(A) ;AXIS name
;R0=$AA_SOFTENDP[AXIVAR]-2; + Limit
;R1=$AA_SOFTENDN[AXIVAR]+2; - Limit
G94G90 G01 AX[AXIVAR]=R0 F=R6
;M0
R3=0
G4 F=R5
M34
MARK0:R3=(R0-R1)/R2
G94G01G91 AX[AXIVAR]=R4 F=R6
G01G91 AX[AXIVAR]=-R4  F=R6
G4 F=R5
MARK1:G01G91 AX[AXIVAR]=-R2 F=R6 
G4 F=R5
R3=R3-1
IF(R3>0)GOTOB MARK1
R3=0
R3=(R0-R1)/R2
G94G01G91 AX[AXIVAR]=-R4 F=R6
G01G91 AX[AXIVAR]=R4  F=R6
G4 F=R5
MARK2:G01G91 AX[AXIVAR]=R2 F=R6
G4 F=R5
R3=R3-1
IF(R3>0)GOTOB MARK2
GOTOB MARK0
M35
M30


